<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Incentive Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background: #f7fafc;
      font-family: "Segoe UI", Arial, sans-serif;
    }
    .sidebar {
      min-height: 100vh;
      background: #212529;
      color: #eee;
    }
    .sidebar .nav-link {
      color: #adb5bd;
      border-radius: 0.3rem;
      margin-bottom: 2px;
      display: flex;
      align-items: center;
    }
    .sidebar .nav-link .bi {
      margin-right: 0.8em;
      font-size: 1.1em;
    }
    .sidebar .nav-link.active,
    .sidebar .nav-link:hover {
      background: #343a40;
      color: #fff;
    }
    .sidebar .sidebar-title {
      font-weight: bold;
      color: #fff;
      font-size: 1.35rem;
      margin-bottom: 1.2rem;
    }
    .card {
      border-radius: 1rem;
    }
    .form-floating > .form-control,
    .form-floating > .form-select {
      border-radius: 0.25rem;
    }
    .main-content {
      padding: 2rem;
    }
    @media (max-width: 768px) {
      .sidebar {
        min-height: unset;
      }
      .main-content {
        padding: 1rem;
      }
    }
	/* Style for active tab: underline only */
.nav-tabs .nav-link.active {
    background-color: transparent !important;
    color: #4a19d2  !important;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    border-bottom: 3px solid #1976d2 !important; /* underline effect */
}

/* Optional: Inactive tabs */
.nav-tabs .nav-link {
    background-color: transparent !important;
    color: #1976d2 !important;
    border: none !important;
    outline: none !important;
}


  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <nav class="col-md-3 col-lg-2 d-md-block sidebar p-3">
        <div class="sidebar-title mb-4">
          <i class=""></i> Incentive
        </div>
        <div class="accordion" id="sidebarAccordion">
          <!-- Masters Accordion -->
          
          <!-- Settings Accordion -->
          
        </div>
        <ul class="nav flex-column mt-3 mb-auto">
          <li>
            <a href="#" class="nav-link" data-content="dashboard"
              ><i class="bi bi-house"></i> Dashboard</a>
          </li>
		  <li>
            <a href="#" class="nav-link" data-content="master"
              ><i class="bi bi-diagram-3 me-2"></i> Master</a>
          </li>
		  <li>
            <a href="#" class="nav-link" data-content="settings"
              ><i class="bi bi-gear me-2"></i> Settings</a>
          </li>
         
          <li>
            <a href="#" class="nav-link" data-content="mapping"
              ><i class="bi bi-link-45deg"></i> Mapping</a>
          </li>
         
		  <li>
            <a href="#" class="nav-link" data-content="datasync"
              ><i class="bi bi-arrow-repeat"></i> Data Sync</a>
          </li>
          <li>
            <a href="#" class="nav-link" data-content="review"
              ><i class="bi bi-clipboard-data"></i> Review</a>
          </li>
		  <li>
            <a href="#" class="nav-link" data-content="process"
              ><i class="bi bi-activity"></i> Process</a>
          </li>
          <li>
            <a href="#" class="nav-link" data-content="reports"
              ><i class="bi bi-graph-up"></i> Reports</a>
          </li>
        </ul>
        <div class="mt-4 ms-1" style="font-size: 0.9em; color: #6c757d">
          User: <i class="bi bi-person-circle"></i> Admin
        </div>
      </nav>
      <!-- Main Content -->
      <main class="col-md-9 ms-sm-auto col-lg-10 main-content">
        <div class="card shadow mb-4">
          <div class="card-body">
            <h3 class="mb-2" id="contentTitle">Incentive Mockup</h3>
            <div id="dynamicContent">
             
            </div>
          </div>
        </div>
      </main>
    </div>
   </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
 
   const mastersTabsContent = `
      <ul class="nav nav-tabs mb-3" id="mastersTabs" role="tablist">
        
        <li class="nav-item" role="presentation">
		  <!-- <button class="nav-link active" id="policy-tab" data-bs-toggle="tab" data-bs-target="#policy" type="button" role="tab">Policy Master</button> -->
          <button class="nav-link active" id="kra-tab" data-bs-toggle="tab" data-bs-target="#kra" type="button" role="tab">KRA Master</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="document-tab" data-bs-toggle="tab" data-bs-target="#document" type="button" role="tab">Document Upload</button>
        </li>
      </ul>
      <div class="tab-content" id="mastersTabContent">
        
        <div class="tab-pane fade show active" id="kra" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="col-md-6">
              <label class="form-label">KRA Describtion</label>
              <input type="text" class="form-control" placeholder="Enter KRA " />
            </div>
            
            <div class="col-12">
              <button class="btn btn-primary">Add KRA</button>
            </div>
          </form>
          <table class="table table-hover align-middle">
            <thead>
              <tr>
                <th>ID</th>
                <th>KRA Title</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>Sales Growth</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Customer Retention</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="tab-pane fade" id="document" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="col-md-8">
              <label class="form-label">Upload Document</label>
              <input type="file" class="form-control" />
            </div>
            <div class="col-md-4 align-self-end">
              <button class="btn btn-primary mt-2">Upload</button>
            </div>
          </form>
          <table class="table table-hover align-middle">
            <thead>
              <tr>
                <th>ID</th>
                <th>Document Name</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>Appraisal.pdf</td>
                <td>Uploaded</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Contract.docx</td>
                <td>Pending</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    `;

    const settingsTabsContent = `
     <!-- Top-level Tabs -->
<ul class="nav nav-tabs" id="settingsParentTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="marketing-parent" data-bs-toggle="tab" data-bs-target="#marketing-group" type="button" role="tab">Marketing Settings</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="general-parent" data-bs-toggle="tab" data-bs-target="#general-group" type="button" role="tab">General Settings</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="mail-parent" data-bs-toggle="tab" data-bs-target="#mail-group" type="button" role="tab">Mail Settings</button>
  </li>
</ul>

<!-- Second-level Tabs -->
<div class="tab-content mt-2">
  
  <!-- Marketing Settings -->
  <div class="tab-pane fade show active" id="marketing-group" role="tabpanel">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <button class="nav-link active" id="payout-tab" data-bs-toggle="tab" data-bs-target="#payout" type="button" role="tab">Policy role settings</button>
      </li>
	  <li class="nav-item">
        <button class="nav-link" id="process-evaluation-tab" data-bs-toggle="tab" data-bs-target="#process-evaluation" type="button" role="tab">Process & Evaluation period</button>
      </li>
    </ul>
  </div>

  <!-- General Settings -->
  <div class="tab-pane fade" id="general-group" role="tabpanel">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <button class="nav-link active" id="review-tab" data-bs-toggle="tab" data-bs-target="#review" type="button" role="tab">Review Period</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="ex-incentiv-department-tab" data-bs-toggle="tab" data-bs-target="#ex-incentiv-department" type="button" role="tab">Exclude Incentive Department</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="fy-ebitda-tab" data-bs-toggle="tab" data-bs-target="#fy-ebitda" type="button" role="tab">FY EBITDA</button>
      </li>
	   <li class="nav-item">
        <button class="nav-link" id="dept-ebitda-tab" data-bs-toggle="tab" data-bs-target="#dept-ebitda" type="button" role="tab">Department wise EBITDA</button>
      </li>
	  <li class="nav-item">
        <button class="nav-link" id="stop-exclude-tab" data-bs-toggle="tab" data-bs-target="#stop-exclude-incentive" type="button" role="tab">Stop and waiting period Employee</button>
      </li>
    </ul>
  </div>

  <!-- Mail Settings -->
  <div class="tab-pane fade" id="mail-group" role="tabpanel">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <button class="nav-link active" id="template-tab" data-bs-toggle="tab" data-bs-target="#template" type="button" role="tab">Mail Template</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="mail-tab" data-bs-toggle="tab" data-bs-target="#mail" type="button" role="tab">Department wise Mail Template</button>
      </li>
	  <li class="nav-item">
        <button class="nav-link" id="alert-reminder-tab" data-bs-toggle="tab" data-bs-target="#alert-reminder" type="button" role="tab">Alert Reminder Mail</button>
      </li>
	  <li class="nav-item">
        <button class="nav-link" id="mail-config-tab" data-bs-toggle="tab" data-bs-target="#mail-config" type="button" role="tab">Mail Config</button>
      </li>
    </ul>
  </div>
</div>


    `;

// Mapping tabs content
const mappingTabsContent = `
<ul class="nav nav-tabs mb-3" id="mappingTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="kra-allocation-tab" data-bs-toggle="tab" data-bs-target="#kra-allocation" type="button">KRA Allocation</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="kra-mapping-tab" data-bs-toggle="tab" data-bs-target="#kra-mapping" type="button">KRA Mapping</button>
  </li>
 
</ul>

`;


// Datasync tabs content
const datasync = `
<ul class="nav nav-tabs mb-3" id="mappingTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="bi-tab" data-bs-toggle="tab" data-bs-target="#bi-sync" type="button">BI Sync</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="cmm-tab" data-bs-toggle="tab" data-bs-target="#cmm-sync" type="button">CMM Sync</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="collect-tab" data-bs-toggle="tab" data-bs-target="#collect-sync" type="button">Buddy Collect Sync</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="remo-tab" data-bs-toggle="tab" data-bs-target="#remo-sync" type="button">Remo Sync</button>
  </li>
</ul>
<div class="tab-content" id="mappingTabContent">
	  <div class="tab-pane fade show active" id="bi-sync">
		<form id="biForm" class="row g-3 mb-3">
		  <div class="col-md-6">
			 <div class="col-12">
              <button class="btn btn-primary">Sync data</button>
            </div>
		  </div>
		  <br>
		  <!-- Table initially hidden -->
  <div class="row" id="resultTableBI" style="">
    <div class="col-12">
      <table class="table table-bordered">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Data Sync Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Data sync with BI application is Completed<span class="badge bg-success">Completed</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
		</form>
	   
	  </div>
	<div class="tab-pane fade" id="cmm-sync">
		<form id="cmmForm" class="row g-3 mb-3">
		  <div class="col-md-6">
			 <div class="col-12">
              <button class="btn btn-primary">Sync data</button>
            </div>
		  </div>
		  <br>
		  <!-- Table initially hidden -->
  <div class="row" id="resultTableCMM" style="">
    <div class="col-12">
      <table class="table table-bordered">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Data Sync Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Data sync with CMM application is Completed<span class="badge bg-success">Completed</span></td>
          </tr>
          
        </tbody>
      </table>
    </div>
  </div>
		</form>
	   
	  </div>
	  <div class="tab-pane fade" id="collect-sync">
		<form id="sapForm" class="row g-3 mb-3">
		  <div class="col-md-6">
			 <div class="col-12">
              <button class="btn btn-primary">Sync data</button>
            </div>
		  </div>
		  <br>
		  <!-- Table initially hidden -->
  <div class="row" id="resultTableCollect" style="">
    <div class="col-12">
      <table class="table table-bordered">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Data Sync Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Data sync with Buddy collect application is not Completed<span class="badge bg-danger">Not Completed</span></td>
          </tr>
          
        </tbody>
      </table>
    </div>
  </div>
		</form>
	   
	  </div>
	  <div class="tab-pane fade" id="remo-sync">
		<form id="collectForm" class="row g-3 mb-3">
		  <div class="col-md-6">
			  <div class="col-12">
              <button class="btn btn-primary">Sync data</button>
            </div>
		  </div>
		   <br>
		  <!-- Table initially hidden -->
  <div class="row" id="resultTableCollect" style="">
    <div class="col-12">
      <table class="table table-bordered">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Data Sync Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Data sync with Remo application is not Completed<span class="badge bg-warning">Pending</span></td>
          </tr>
          
        </tbody>
      </table>
    </div>
  </div>
		</form>
	   
	  </div>
</div>
`;
  const performanceTabContent = `
      <ul class="nav nav-tabs mb-3" id="performanceTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="primary-tab" data-bs-toggle="tab" data-bs-target="#primary" type="button" role="tab">Performance Review</button>
        </li>
       
      </ul>
      <div class="tab-content" id="performanceTabContent">
        <div class="tab-pane fade show active" id="primary" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="col-md-6">
              <div class="section-title">Primary Level Checking</div><p>First round review by managers.</p>
            </div>
            <div class="col-12">
              <div class="row mb-3">
        <div class="col-md-3">
          <label class="form-label">Overall Score</label>
          <input type="text" class="form-control" id="overallScore" readonly value="85.90%" />
        </div>
        <div class="col-md-3">
          <label for="employeeName" class="form-label">Employee Name</label>
          <input type="text" class="form-control" id="employeeName" placeholder="Employee Name" required />
        </div>
        <div class="col-md-2">
          <label for="employeeId" class="form-label">Employee ID</label>
          <input type="text" class="form-control" id="employeeId" placeholder="Employee ID" />
        </div>
        <div class="col-md-2">
          <label for="department" class="form-label">Department</label>
          <input type="text" class="form-control" id="department" placeholder="Department" />
        </div>
        <div class="col-md-2">
          <label for="reviewer" class="form-label">Reviewer</label>
          <input type="text" class="form-control" id="reviewer" placeholder="Reviewer" />
        </div>
      </div>

     

      <table class="table table-bordered align-middle">
        <thead>
          <tr>
            <th>KRA</th>
            <th>Target</th>
            <th>Weight (%)</th>
            <th>Score (0–100)</th>
            <th>Weighted</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Revenue Target <br/><small>Achieve quarterly sales</small></td>
            <td>$250,000</td>
            <td><input type="number" class="form-control weight-input" min="0" max="100" value="34.00" /></td>
            <td><input type="number" class="form-control score-input" min="0" max="100" value="85.00" /></td>
            <td class="weighted-score text-end">0.00</td>
          </tr>
          <tr>
            <td>New Accounts <br/><small>Net new customers</small></td>
            <td>30 accounts</td>
            <td><input type="number" class="form-control weight-input" min="0" max="100" value="22.50" /></td>
            <td><input type="number" class="form-control score-input" min="0" max="100" value="90.00" /></td>
            <td class="weighted-score text-end">0.00</td>
          </tr>
          <tr>
            <td>Customer Satisfaction <br/><small>CSAT survey average</small></td>
            <td>≥4.2/5</td>
            <td><input type="number" class="form-control weight-input" min="0" max="100" value="15.60" /></td>
            <td><input type="number" class="form-control score-input" min="0" max="100" value="80.00" /></td>
            <td class="weighted-score text-end">0.00</td>
          </tr>
          <tr>
            <td>Process & Teamwork <br/><small>Collaboration, ops adherence</small></td>
            <td>N/A</td>
            <td><input type="number" class="form-control weight-input" min="0" max="100" value="13.80" /></td>
            <td><input type="number" class="form-control score-input" min="0" max="100" value="88.00" /></td>
            <td class="weighted-score text-end">0.00</td>
          </tr>
          <tr>
            <td>Learning & Compliance <br/><small>Training completion & policy</small></td>
            <td>100% mandatory</td>
            <td><input type="number" class="form-control weight-input" min="0" max="100" value="0.00" /></td>
            <td><input type="number" class="form-control score-input" min="0" max="100" value="0.00" /></td>
            <td class="weighted-score text-end">0.00</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th colspan="2" class="text-end">Total Weight:</th>
            <th><span id="totalWeight">100.00</span>%</th>
            <th></th>
            <th><span id="finalWeightedScore">85.90</span></th>
          </tr>
        </tfoot>
      </table>

      <!-- Calculate Button -->
      <div class="mb-3">
        <button type="button" id="calculateBtn" class="btn btn-primary">Calculate</button>
      </div>

      <div class="mb-3">
        <label for="reviewerComments" class="form-label">Reviewer Comments</label>
        <textarea class="form-control" id="reviewerComments" rows="3"></textarea>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <label for="reviewerSignature" class="form-label">Reviewer Signature</label>
          <input type="text" class="form-control" id="reviewerSignature" placeholder="Signature" />
        </div>
        <div class="col-md-6">
          <label for="employeeAcknowledgement" class="form-label">Employee Acknowledgement</label>
          <input type="text" class="form-control" id="employeeAcknowledgement" placeholder="Employee Name" />
        </div>
      </div>

      <small class="text-muted d-block mb-4">
        Generated: 9/26/2025, 3:21:53 PM
      </small>

      <div>
        <button type="button" class="btn btn-outline-secondary me-2" onclick="window.print()">Print / Save PDF</button>
        <button type="button" class="btn btn-outline-secondary" id="downloadHtmlBtn">Save</button>
      </div>
            </div>
          </form>
        </div>

        
      </div>
      `;
      const reportTabContent = `
      <ul class="nav nav-tabs mb-3" id="reportTabs" role="tablist">
	  <li class="nav-item" role="presentation">
          <button class="nav-link active" id="departmentReport-tab" data-bs-toggle="tab" data-bs-target="#departmentReport" type="button" role="tab">Department EBITDA Allotment</button>
        </li> 
		<li class="nav-item" role="presentation">
          <button class="nav-link" id="deviation-group-tab" data-bs-toggle="tab" data-bs-target="#deviation-group" type="button" role="tab">Deviation Report</button>
        </li>
         
       
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="reviewerReport-tab" data-bs-toggle="tab" data-bs-target="#reviewerReport" type="button" role="tab">Performance Score Report</button>
        </li>                
      </ul>
	  <!-- Deviation group report -->
	  <div class="tab-content mt-2">
	  <div class="tab-pane fade" id="deviation-group" role="tabpanel">
    <ul class="nav nav-tabs">
       <li class="nav-item" role="presentation">
          <button class="nav-link active" id="kraReport-tab" data-bs-toggle="tab" data-bs-target="#kraReport" type="button" role="tab">KRA Mapped/UnMapped</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="stopPaymentReport-tab" data-bs-toggle="tab" data-bs-target="#stopPaymentReport" type="button" role="tab">StopPayment</button>
        </li>   
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="eligibilityReport-tab" data-bs-toggle="tab" data-bs-target="#eligibilityReport" type="button" role="tab">Process/Not Processed Employee</button>
        </li>   
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="deviationReport-tab" data-bs-toggle="tab" data-bs-target="#deviationReport" type="button" role="tab">Amount Deviation</button>
        </li>
    </ul>
  </div>
	  </div>
      `;
	  const process=`
	  <ul class="nav nav-tabs mb-3" id="processTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="incentiv-process-tab" data-bs-toggle="tab" data-bs-target="#incentiv-process" type="button" role="tab">Incentive Process</button>
        </li>
		<li class="nav-item" role="presentation">
          <button class="nav-link" id="incentiv-adjustment-tab" data-bs-toggle="tab" data-bs-target="#incentiv-adjustment" type="button" role="tab">Incentive Adjustment</button>
        </li>
       
      </ul>
	  `;
  const MailSettingContent = `
      <ul class="nav nav-tabs mb-3" id="performanceTabs1" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="mailTemplate-tab" data-bs-toggle="tab" data-bs-target="#mailTemplate" type="button" role="tab">Mail Template</button>
        </li>
        
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="departmentwise-tab" data-bs-toggle="tab" data-bs-target="#departmentwise" type="button" role="tab">Departmentwise Mapping</button>
        </li>   
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="reminderMail-tab" data-bs-toggle="tab" data-bs-target="#reminderMail" type="button" role="tab">Reminder & alert Mail</button>
        </li>   
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="mailConfig-tab" data-bs-toggle="tab" data-bs-target="#mailConfig" type="button" role="tab">Mail Configuration</button>
        </li>      
      </ul>
      <div class="tab-content" id="MailSettingContent">
        <div class="tab-pane fade show active" id="mailTemplate" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="col-md-6">
              <div class="section-title">Mail Template</div>
            </div>
            <div class="col-12">
              <div class="mb-3">
        <label for="templateSelect" class="form-label">Select Template</label>
        <select class="form-select" id="templateSelect" aria-label="Select Template">
          <option selected>Choose...</option>
          <option value="processing">Processing</option>
          <option value="reward">Reward</option>
          <option value="approval">Approval</option>
          <!-- Add more options as needed -->
        </select>
      </div>

      <!-- Template Editor -->
      <div class="mb-3">
        <label for="templateEditor" class="form-label">Template Editor</label>
        <textarea class="form-control" id="templateEditor" rows="1" placeholder="Enter your template HTML or rich text here..."></textarea>
      </div>

      <!-- Upload New Template -->
      <div class="mb-3">
        <label for="uploadTemplate" class="form-label">Upload New Template</label>
        <input class="form-control" type="file" id="uploadTemplate" accept=".html,.htm,.txt" />
      </div>

      <!-- Buttons -->
      <div class="d-flex gap-2">
        <button type="button" class="btn btn-secondary" id="previewBtn">Preview</button>
        <button type="submit" class="btn btn-primary" id="saveBtn">Save</button>
      </div>
              </div>
          </form>
           
        </div>

        <div class="tab-pane fade" id="departmentwise" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="section-title">Departmentwise Mapping</div>
            <div class="col-12">
                    <div class="mb-3">
            <label for="fromName" class="form-label">Default From Name</label>
            <input type="text" class="form-control" id="fromName" placeholder="Enter default sender name" />
          </div>

          <!-- Default From Email -->
          <div class="mb-3">
            <label for="fromEmail" class="form-label">Default From Email</label>
            <input type="email" class="form-control" id="fromEmail" placeholder="Enter default sender email" />
          </div>

          <!-- Reply-To Email -->
          <div class="mb-3">
            <label for="replyToEmail" class="form-label">Reply-To Email</label>
            <input type="email" class="form-control" id="replyToEmail" placeholder="Enter reply-to email" />
          </div>

          <!-- BCC Email (optional) -->
          <div class="mb-3">
            <label for="bccEmail" class="form-label">BCC Email (optional)</label>
            <input type="email" class="form-control" id="bccEmail" placeholder="Enter BCC email (optional)" />
          </div>

          <!-- Enable Per-Department Sender -->
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="enablePerDeptSender" />
            <label class="form-check-label" for="enablePerDeptSender">
              Enable Per-Department Sender?
            </label>
          </div>

          <!-- Department-Specific Sender Settings Table -->
          <div id="departmentSenderSettings" class="d-none">
            <div class="mb-3">
              <label for="departmentSelect" class="form-label">Select Department</label>
              <select class="form-select" id="departmentSelect">
                <option selected disabled>Choose Department...</option>
                <option value="processing">Processing</option>
                <option value="reward">Reward</option>
                <option value="approval">Approval</option>
                <!-- Add more as needed -->
              </select>
            </div>

            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Department</th>
                  <th>From Name</th>
                  <th>From Email</th>
                  <th>Reply-To Email</th>
                  <th>BCC Email (optional)</th>
                </tr>
              </thead>
              <tbody id="deptSenderTableBody">
                <!-- Rows get added dynamically -->
              </tbody>
            </table>
          </div>

          <!-- Save Button -->
          <button type="submit" class="btn btn-primary">Save</button>

            </div>
          </form>
         
        </div>

        <div class="tab-pane fade" id="reminderMail" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="col-md-6">
              <div class="section-title">Reminder and alert mails</div>
            </div>
            <div class="col-12">
               <!-- Enable Reminder Emails -->
              <div class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" id="enableReminderEmails" checked />
                <label class="form-check-label" for="enableReminderEmails">Enable Reminder Emails</label>
              </div>
            
              <!-- Reminder Interval (Days) -->
              <div class="mb-3">
                <label for="reminderInterval" class="form-label">Reminder Interval (Days)</label>
                <input type="number" class="form-control" id="reminderInterval" min="1" placeholder="Enter days interval" />
              </div>
            
              <!-- Max Reminder Attempts -->
              <div class="mb-3">
                <label for="maxAttempts" class="form-label">Max Reminder Attempts</label>
                <input type="number" class="form-control" id="maxAttempts" min="1" placeholder="Enter max attempts" />
              </div>
            
              <!-- Time of Day to Send -->
              <div class="mb-3">
                <label for="timeOfDay" class="form-label">Time of Day to Send</label>
                <input type="time" class="form-control" id="timeOfDay" />
              </div>
            
              <!-- Exclude Weekends -->
              <div class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" id="excludeWeekends" />
                <label class="form-check-label" for="excludeWeekends">Exclude Weekends</label>
              </div>
            
              <!-- Alert on Inactivity (Days) -->
              <div class="mb-3">
                <label for="alertOnInactivity" class="form-label">Alert on Inactivity (Days)</label>
                <input type="number" class="form-control" id="alertOnInactivity" min="1" placeholder="Enter days" />
              </div>
            
              <!-- Alert Recipients -->
              <div class="mb-3">
                <label for="alertRecipients" class="form-label">Alert Recipients</label>
                <input type="text" class="form-control" id="alertRecipients" placeholder="Enter alert recipients (comma separated or multi-select)" />
              </div>
            
              <!-- Add Custom Alert Rule Button -->
              <button type="button" class="btn btn-outline-primary" id="addAlertRuleBtn">Add Custom Alert Rule</button>
    
            </div>
          </form>
          
        </div>



        <div class="tab-pane fade" id="mailConfig" role="tabpanel">
          <form class="row g-3 mb-4">
            <div class="col-md-6">
              <div class="section-title">Mail Configuration</div>
            </div>
            <div class="col-12">
              <!-- SMTP Host -->
      <div class="mb-3">
        <label for="smtpHost" class="form-label">SMTP Host</label>
        <input type="text" class="form-control" id="smtpHost" placeholder="Enter SMTP host" />
      </div>

      <!-- SMTP Port -->
      <div class="mb-3">
        <label for="smtpPort" class="form-label">SMTP Port</label>
        <input type="number" class="form-control" id="smtpPort" placeholder="Enter SMTP port" />
      </div>

      <!-- Encryption -->
      <div class="mb-3">
        <label for="encryption" class="form-label">Encryption</label>
        <select class="form-select" id="encryption">
          <option value="none" selected>None</option>
          <option value="ssl">SSL</option>
          <option value="tls">TLS</option>
        </select>
      </div>

      <!-- Requires Authentication -->
      <div class="form-check form-switch mb-3">
        <input class="form-check-input" type="checkbox" id="requiresAuth" />
        <label class="form-check-label" for="requiresAuth">Requires Authentication</label>
      </div>

      <!-- Username -->
      <div class="mb-3">
        <label for="username" class="form-label">Username</label>
        <input type="text" class="form-control" id="username" placeholder="Enter username" />
      </div>

      <!-- Password with Show/Hide toggle -->
      <div class="mb-3 position-relative">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" id="password" placeholder="Enter password" />
        <!-- <button type="button" class="btn btn-outline-secondary btn-sm position-absolute top-50 end-0 translate-middle-y me-2" id="togglePassword"> -->
          
        <!-- </button> -->
      </div>

      <!-- Test Connection Button -->
      <button type="button" class="btn btn-primary" id="testConnectionBtn">Test Connection</button>
   
            </div>
          </form>
          
        </div>


      </div>
      `;
 
    const contentTitle = document.getElementById("contentTitle");
    const dynamicContent = document.getElementById("dynamicContent");
    const sidebarAccordion = document.getElementById("sidebarAccordion");

    // Listen to Masters and Settings accordion button clicks
    sidebarAccordion.querySelectorAll("button[data-menu]").forEach((btn) => {
      btn.addEventListener("click", function () {
        const menu = this.getAttribute("data-menu");
        if (menu === "masters") {
          contentTitle.textContent = "Masters";
          dynamicContent.innerHTML = mastersTabsContent;
        } else if (menu === "settings") {
          contentTitle.textContent = "Settings";
          dynamicContent.innerHTML = settingsTabsContent;
        }
		 if(key==="mapping") attachMappingLogic();
		 if(key==="bulk") attachBulkLogic();
      });
    });

    // Sidebar main nav non-accordion links
    document.querySelectorAll('.sidebar ul.nav.flex-column > li > a.nav-link').forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();
        let key = item.getAttribute('data-content');
        contentTitle.textContent =
          key.charAt(0).toUpperCase() + key.slice(1).replace(/([A-Z])/g, ' $1');
        dynamicContent.innerHTML = contentMap[key] || "<p>Coming Soon</p>";

        bootstrap.Collapse.getInstance(document.getElementById("collapseMasters"))?.hide();
        bootstrap.Collapse.getInstance(document.getElementById("collapseSettings"))?.hide();

        // If dashboard, load charts
        if (key === "dashboard") {
          setTimeout(initCharts, 50);
        }
		 
      });
    });

    // Map for non-accordion menus
    const contentMap = {
      dashboard: `
        <h5>Analytics</h5>
        <div class="row mb-4">
          <div class="col-md-6 mb-3">
            <canvas id="barChart"></canvas>
          </div>
          <div class="col-md-6 mb-3">
            <canvas id="pieChart"></canvas>
          </div>
          <div class="col-md-6 mb-3">
            <canvas id="lineChart"></canvas>
          </div>
          <div class="col-md-6 mb-3">
            <canvas id="doughnutChart"></canvas>
          </div>
        </div>

        <h5>Overview</h5>
        <div class="row">
          <div class="col-sm-4">
            <div class="card p-3 mb-3"><span class="fs-6">Policies</span><div class="display-6 fw-bold">8</div></div>
          </div>
          <div class="col-sm-4">
            <div class="card p-3 mb-3"><span class="fs-6">KRAs</span><div class="display-6 fw-bold">16</div></div>
          </div>
          <div class="col-sm-4">
            <div class="card p-3 mb-3"><span class="fs-6">Eligible Employees</span><div class="display-6 fw-bold">74</div></div>
          </div>
        </div>
      `,
  mapping: mappingTabsContent,
  
  master:mastersTabsContent,
  settings:settingsTabsContent,
  datasync:datasync,
  mail: MailSettingContent,
  process:process,
  review:performanceTabContent ,
  reports:reportTabContent
	    
    };

    function initCharts() {
      // Bar Chart
      new Chart(document.getElementById("barChart"), {
        type: "bar",
        data: {
          labels: ["Q1", "Q2", "Q3", "Q4"],
          datasets: [{
            label: "Revenue",
            data: [120, 150, 180, 200],
            backgroundColor: "#0d6efd"
          }]
        }
      });

      // Pie Chart
      new Chart(document.getElementById("pieChart"), {
        type: "pie",
        data: {
          labels: ["Policies", "KRAs", "Employees"],
          datasets: [{
            data: [8, 16, 74],
            backgroundColor: ["#0d6efd", "#198754", "#ffc107"]
          }]
        }
      });

      // Line Chart
      new Chart(document.getElementById("lineChart"), {
        type: "line",
        data: {
          labels: ["Jan", "Feb", "Mar", "Apr"],
          datasets: [{
            label: "Performance",
            data: [65, 75, 70, 85],
            borderColor: "#dc3545",
            fill: false,
            tension: 0.3
          }]
        }
      });

      // Doughnut Chart
      new Chart(document.getElementById("doughnutChart"), {
        type: "doughnut",
        data: {
          labels: ["Completed", "Pending", "In Progress"],
          datasets: [{
            data: [40, 20, 30],
            backgroundColor: ["#198754", "#ffc107", "#0dcaf0"]
          }]
        }
      });
    }
	
// Mapping Logic
function attachMappingLogic() {
  const deptTabs = document.getElementById('mappingTabs');
  const activeTab = deptTabs.querySelector('.nav-link.active');
  if (activeTab && activeTab.id === 'dept-mapping-tab') {
    attachDeptMappingLogic();
  }

  deptTabs.addEventListener('shown.bs.tab', function (e) {
    if (e.target.id === 'dept-mapping-tab') {
      attachDeptMappingLogic();
    }
  });

  const deptSelect = document.getElementById("departmentSelect");
  const kraInputDiv = document.getElementById("kraInputDiv");
  const kraForm = document.getElementById("kraForm");
  const kraTable = document.getElementById("kraTable").querySelector("tbody");

  deptSelect?.addEventListener("change", () => {
    kraInputDiv.classList.toggle("d-none", !deptSelect.value);
  });

  kraForm?.addEventListener("submit", e => {
    e.preventDefault();
    const kra = document.getElementById("kraInput").value;
    if(deptSelect.value && kra) {
      kraTable.insertAdjacentHTML("beforeend", `<tr><td>${deptSelect.value}</td><td>${kra}</td></tr>`);
      document.getElementById("kraTable").classList.remove("d-none");
      kraForm.reset(); kraInputDiv.classList.add("d-none");
    }
  });

  // Reviewer Mapping
  const reviewerDept = document.getElementById("reviewerDeptSelect");
  const reviewerCxo = document.getElementById("reviewerCxoSelect");
  const reviewerForm = document.getElementById("reviewerForm");
  const reviewerTable = document.getElementById("reviewerTable").querySelector("tbody");

  const cxos = { Sales:["CXO A","CXO B"], HR:["CXO C"], IT:["CXO D"], Finance:["CXO E"] };

  reviewerDept?.addEventListener("change", () => {
    reviewerCxo.innerHTML = `<option value="">-- Select CXO --</option>`;
    if(reviewerDept.value) cxos[reviewerDept.value].forEach(c=> reviewerCxo.insertAdjacentHTML("beforeend", `<option>${c}</option>`));
  });

  reviewerForm?.addEventListener("submit", e => {
    e.preventDefault();
    if(reviewerDept.value && reviewerCxo.value) {
      reviewerTable.insertAdjacentHTML("beforeend", `<tr><td>${reviewerDept.value}</td><td>${reviewerCxo.value}</td></tr>`);
      document.getElementById("reviewerTable").classList.remove("d-none");
      reviewerForm.reset();
    }
  });
}

// Department-wise Mapping Logic
function attachDeptMappingLogic() {
  const deptSelect = document.getElementById("deptEbitdaSelect");
  const ebitdaInput = document.getElementById("ebitdaInput");
  const ebitdaTableBody = document.getElementById("ebitdaTable").querySelector("tbody");
  
  const allDepartments = ["Sales", "HR", "IT", "Finance"];
  
  // Initial population of the table with 0%
  function resetTable() {
    ebitdaTableBody.innerHTML = '';
    allDepartments.forEach(dept => {
      const row = `<tr><td>${dept}</td><td>0%</td></tr>`;
      ebitdaTableBody.insertAdjacentHTML('beforeend', row);
    });
  }
  
  resetTable();
  
  deptSelect?.addEventListener("change", () => {
    ebitdaInput.disabled = !deptSelect.value;
    ebitdaInput.value = '';
    if (deptSelect.value) {
      const remainingDepts = allDepartments.filter(d => d !== deptSelect.value);
      const remainingPct = 100 / (remainingDepts.length + 1);
      
      ebitdaTableBody.innerHTML = '';
      allDepartments.forEach(dept => {
        const percentage = (dept === deptSelect.value) ? 0 : remainingPct;
        const row = `<tr><td>${dept}</td><td>${percentage.toFixed(2)}%</td></tr>`;
        ebitdaTableBody.insertAdjacentHTML('beforeend', row);
      });
    } else {
      resetTable();
    }
  });
  
  ebitdaInput?.addEventListener("input", () => {
    let enteredPct = parseFloat(ebitdaInput.value);
    
    if (isNaN(enteredPct) || enteredPct < 0) {
      enteredPct = 0;
    } else if (enteredPct > 100) {
      enteredPct = 100;
      ebitdaInput.value = 100;
    }
    
    const selectedDept = deptSelect.value;
    const remainingPct = 100 - enteredPct;
    const remainingDepts = allDepartments.filter(dept => dept !== selectedDept);
    const dividedPct = remainingDepts.length > 0 ? remainingPct / remainingDepts.length : 0;
    
    ebitdaTableBody.innerHTML = '';
    allDepartments.forEach(dept => {
      let percentage;
      if (dept === selectedDept) {
        percentage = enteredPct;
      } else {
        percentage = dividedPct;
      }
      const row = `<tr><td>${dept}</td><td>${percentage.toFixed(2)}%</td></tr>`;
      ebitdaTableBody.insertAdjacentHTML('beforeend', row);
    });
  });
}

// Bulk Logic
function attachBulkLogic() {
  document.querySelectorAll(".bulkForm").forEach(form => {
    const dropzone = form.querySelector(".dropzone");
    const fileInput = form.querySelector(".fileInput");
    const downloadTemplate = form.querySelector(".downloadTemplate");

    dropzone.addEventListener("click", () => fileInput.click());
    dropzone.addEventListener("dragover", e => { e.preventDefault(); dropzone.classList.add("dragover"); });
    dropzone.addEventListener("dragleave", () => dropzone.classList.remove("dragover"));
    dropzone.addEventListener("drop", e => { e.preventDefault(); dropzone.classList.remove("dragover"); fileInput.files = e.dataTransfer.files; });

    downloadTemplate.addEventListener("click", () => {
      const link = document.createElement("a"); link.href="template.xlsx"; link.download="Template.xlsx"; link.click();
    });

    form.addEventListener("submit", e => { e.preventDefault(); alert("File uploaded for department: "+form.querySelector(".bulkDeptSelect").value); form.reset(); });
  });
}
  </script>
</body>
</html>
